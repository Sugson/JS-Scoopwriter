<section
    ng-controller="PaneRelatedArticlesCtrl"
    class="tabcontent">

    <div class="panel-title">
        Related Articles
    </div>
    
    <div ng-show="showArticlePreview">
        <div class="add-element" ng-class="{expanded: showAddFilter}">
            <div class="heading">
                <button class="btn btn-sf-invisible"
                  ng-click="showAddFilter = !showAddFilter">
                <span class="glyphicon"
                  ng-class="{'glyphicon-plus': !showAddFilter,
                             'glyphicon-minus': showAddFilter}"
                  ></span>
                <span class="add-text">FILTER ARTICLES</span>
                </button>
            </div>

            <div ng-show="showAddFilter" class="filters">
                <select>
                    <option value="" class="">-- Publication --</option>
                    <option value="option1">Option1</option>
                    <option value="option2">Option2</option>
                    <option value="option3">Option3</option>
                    <option value="option4">Option4</option>
                </select>
                <select>
                    <option value="" class="">-- Issue --</option>
                    <option value="option1">Option1</option>
                    <option value="option2">Option2</option>
                    <option value="option3">Option3</option>
                    <option value="option4">Option4</option>
                </select>
                <select ng-model="filterSection" ng-options="section.title for section in availableSections">
                    <option value="" class="">-- Section --</option>
                </select>
                <div class="input-group">
                    <input type="text" class="editor-input" ng-model="query" placeholder="Search">
                    <span class="input-group-btn">
                        <button ng-click="findRelatedArticles(query)" class="btn btn-primary btn-sm" type="button">Filter</button>
                    </span>
                </div>
            </div>
        </div><!-- end add element -->

        <div class="wrapper"
            ng-class="{low: showAddFilter, high: !showAddFilter}">    

            <div class="list">

                <!-- pinned -->
                <div class="group">
                    <div class="title">Pinned articles</div>
                    <div ng-repeat="article in assignedRelatedArticles"
                        class="related-article pinned">
                        <div class="drag-bar"></div>
                        <div
                            class="remove"
                            title="Remove"
                            ng-click="confirmUnassignRelatedArticle(article)"
                            >
                            <span class="glyphicon glyphicon-remove"></span>
                        </div>                
                        <div class="article-metadata">
                            <span class="date">{{article.published| date:"dd.MM.yyyy 'at' H:mm:ss"}}</span>
                            <span class="status new" ng-bind="article.status"></span>
                        </div>
                        <div class="article-title">
                            <a ng-click="previewRelatedArticle(article)" ng-bind="article.title"></a>
                        </div>
                    </div>

                </div><!-- end pinned -->

                <!-- search results -->
                <div class="group">
                    <div class="title">Search results</div>
                    <div ng-repeat="article in availableRelatedArticles"
                        class="related-article">
                        <button 
                            class="btn btn-default btn-xs pin" 
                            ng-disabled="assigningRelatedArticles"
                            title="Pin article">
                            <i class="fa fa-thumb-tack"></i>
                        </button>
                        <div class="article-metadata">
                            <span class="date">{{article.published| date:"dd.MM.yyyy 'at' H:mm:ss"}}</span>
                            <span class="status published" ng-bind="article.status"></span>
                        </div>
                        <div class="article-title">
                            <a  ng-click="previewRelatedArticle(article)" ng-bind="article.title"></a>
                        </div>
                    </div>
                </div><!-- end search results -->
            </div><!-- end list -->
        </div><!-- end wrapper -->
    </div>

    <div ng-hide="showArticlePreview" class="article-preview">
            <div class="header">
                <div class="btn-group">
                    <button class="btn btn-default btn-xs"
                      ng-click="showArticlePreview = !showArticlePreview">
                      <i class="fa fa-chevron-left"></i> Back
                    </button>
                </div>
                <div class="btn-group">
                    <button class="btn btn-default btn-xs">
                        <i class="fa fa-pencil"></i> Edit
                    </button>
                </div>
            </div>
            <div class="content">
                <div class="preview-dateline">{{relatedArticlePreview.published| date:"dd.MM.yyyy 'at' H:mm:ss"}}</div>
                <div class="preview-title" ng-bind-html"relatedArticlePreview.title"></div>
                <div class="preview-lead" ng-bind-html="relatedArticlePreview.lead"></div>
                <div class="preview-body">
                    <p><img ng-src="http://{{relatedArticlePreview.image}}" /></p>
                    <p ng-bind-html="relatedArticlePreview.body"></p>
                </div>
            </div>          
    </div>
</section>
